{"ast":null,"code":"import _objectSpread from\"E:/New folder/New folder/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useContext}from'react';import{getHabits,addHabit,deleteHabit,completeHabit,getCompletions}from'./api';import{AuthContext}from'./AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Habits(){const{token,logout}=useContext(AuthContext);const[habits,setHabits]=useState([]);const[newHabit,setNewHabit]=useState('');const[error,setError]=useState('');const[completions,setCompletions]=useState({});const today=new Date().toISOString().slice(0,10);useEffect(()=>{if(!token)return;getHabits(token).then(res=>setHabits(res.data));},[token]);const handleAdd=async()=>{if(!newHabit)return;try{await addHabit(token,newHabit);setNewHabit('');const res=await getHabits(token);setHabits(res.data);}catch(e){setError('Could not add habit');}};const handleDelete=async id=>{await deleteHabit(token,id);setHabits(habits.filter(h=>h.id!==id));};const handleComplete=async id=>{await completeHabit(token,id,today);setCompletions(_objectSpread(_objectSpread({},completions),{},{[id]:true}));};const fetchCompletions=async id=>{const res=await getCompletions(token,id);setCompletions(c=>_objectSpread(_objectSpread({},c),{},{[id]:res.data.some(d=>d.date===today)}));};useEffect(()=>{habits.forEach(h=>fetchCompletions(h.id));// eslint-disable-next-line\n},[habits]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Habits\"}),/*#__PURE__*/_jsx(\"button\",{className:\"logout-btn\",onClick:logout,children:\"Logout\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"add-habit-row\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"add-habit-input\",placeholder:\"New habit\",value:newHabit,onChange:e=>setNewHabit(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{className:\"add-habit-btn\",onClick:handleAdd,children:\"Add\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error}),/*#__PURE__*/_jsx(\"ul\",{children:habits.map(habit=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"habit-name\",children:habit.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"habit-actions\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"habit-delete-btn\",onClick:()=>handleDelete(habit.id),title:\"Delete\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"delete\",children:\"\\uD83D\\uDDD1\\uFE0F\"}),\" Delete\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"habit-complete-btn\",onClick:()=>handleComplete(habit.id),disabled:completions[habit.id],title:\"Mark as done\",children:[/*#__PURE__*/_jsx(\"span\",{role:\"img\",\"aria-label\":\"done\",children:\"\\u2705\"}),\" Mark as done\"]}),completions[habit.id]&&/*#__PURE__*/_jsx(\"span\",{className:\"habit-done\",title:\"Completed\",children:\"\\u2714\\uFE0F\"})]})]},habit.id))})]});}","map":{"version":3,"names":["React","useState","useEffect","useContext","getHabits","addHabit","deleteHabit","completeHabit","getCompletions","AuthContext","jsx","_jsx","jsxs","_jsxs","Habits","token","logout","habits","setHabits","newHabit","setNewHabit","error","setError","completions","setCompletions","today","Date","toISOString","slice","then","res","data","handleAdd","e","handleDelete","id","filter","h","handleComplete","_objectSpread","fetchCompletions","c","some","d","date","forEach","children","className","onClick","placeholder","value","onChange","target","map","habit","name","title","role","disabled"],"sources":["E:/New folder/New folder/frontend/src/Habits.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { getHabits, addHabit, deleteHabit, completeHabit, getCompletions } from './api';\r\nimport { AuthContext } from './AuthContext';\r\n\r\nexport default function Habits() {\r\n  const { token, logout } = useContext(AuthContext);\r\n  const [habits, setHabits] = useState([]);\r\n  const [newHabit, setNewHabit] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [completions, setCompletions] = useState({});\r\n  const today = new Date().toISOString().slice(0, 10);\r\n\r\n  useEffect(() => {\r\n    if (!token) return;\r\n    getHabits(token).then(res => setHabits(res.data));\r\n  }, [token]);\r\n\r\n  const handleAdd = async () => {\r\n    if (!newHabit) return;\r\n    try {\r\n      await addHabit(token, newHabit);\r\n      setNewHabit('');\r\n      const res = await getHabits(token);\r\n      setHabits(res.data);\r\n    } catch (e) {\r\n      setError('Could not add habit');\r\n    }\r\n  };\r\n\r\n  const handleDelete = async (id) => {\r\n    await deleteHabit(token, id);\r\n    setHabits(habits.filter(h => h.id !== id));\r\n  };\r\n\r\n  const handleComplete = async (id) => {\r\n    await completeHabit(token, id, today);\r\n    setCompletions({ ...completions, [id]: true });\r\n  };\r\n\r\n  const fetchCompletions = async (id) => {\r\n    const res = await getCompletions(token, id);\r\n    setCompletions(c => ({ ...c, [id]: res.data.some(d => d.date === today) }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    habits.forEach(h => fetchCompletions(h.id));\r\n    // eslint-disable-next-line\r\n  }, [habits]);\r\n\r\n  return (\r\n    <div>\r\n      <h2>Your Habits</h2>\r\n      <button className=\"logout-btn\" onClick={logout}>Logout</button>\r\n      <div className=\"add-habit-row\">\r\n        <input className=\"add-habit-input\" placeholder=\"New habit\" value={newHabit} onChange={e => setNewHabit(e.target.value)} />\r\n        <button className=\"add-habit-btn\" onClick={handleAdd}>Add</button>\r\n      </div>\r\n      {error && <div className=\"error\">{error}</div>}\r\n      <ul>\r\n        {habits.map(habit => (\r\n          <li key={habit.id}>\r\n            <span className=\"habit-name\">{habit.name}</span>\r\n            <div className=\"habit-actions\">\r\n              <button className=\"habit-delete-btn\" onClick={() => handleDelete(habit.id)} title=\"Delete\"><span role=\"img\" aria-label=\"delete\">üóëÔ∏è</span> Delete</button>\r\n              <button className=\"habit-complete-btn\" onClick={() => handleComplete(habit.id)} disabled={completions[habit.id]} title=\"Mark as done\"><span role=\"img\" aria-label=\"done\">‚úÖ</span> Mark as done</button>\r\n              {completions[habit.id] && <span className=\"habit-done\" title=\"Completed\">‚úîÔ∏è</span>}\r\n            </div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}