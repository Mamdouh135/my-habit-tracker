{"ast":null,"code":"var _jsxFileName = \"E:\\\\New folder\\\\New folder\\\\frontend\\\\src\\\\AuthContext.js\",\n  _s = $RefreshSig$();\nimport React, { createContext, useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext();\nexport function AuthProvider({\n  children\n}) {\n  _s();\n  const [token, setToken] = useState(localStorage.getItem('token'));\n  const [userProfile, setUserProfile] = useState({\n    name: '',\n    avatar: ''\n  });\n\n  // helper to stash locally\n  const saveLocalProfile = (profile, tkn) => {\n    if (tkn) {\n      try {\n        localStorage.setItem('profile_' + tkn, JSON.stringify(profile));\n      } catch {}\n    }\n  };\n\n  // fetch profile from server when token changes (or load saved)\n  useEffect(() => {\n    if (token) {\n      // first load from storage so UI has something\n      const saved = localStorage.getItem('profile_' + token);\n      if (saved) {\n        try {\n          setUserProfile(JSON.parse(saved));\n        } catch {}\n      }\n      // then try to refresh from server\n      import('./api').then(({\n        getProfile\n      }) => {\n        getProfile(token).then(res => {\n          const prof = {\n            name: res.data.name || '',\n            avatar: res.data.avatar || ''\n          };\n          setUserProfile(prof);\n          saveLocalProfile(prof, token);\n        }).catch(() => {\n          // ignore\n        });\n      });\n    } else {\n      setUserProfile({\n        name: '',\n        avatar: ''\n      });\n    }\n  }, [token]);\n  const login = (newToken, profile) => {\n    setToken(newToken);\n    localStorage.setItem('token', newToken);\n    if (profile) {\n      setUserProfile(profile);\n      saveLocalProfile(profile, newToken);\n    }\n  };\n  const logout = () => {\n    setToken(null);\n    localStorage.removeItem('token');\n    setUserProfile({\n      name: '',\n      avatar: ''\n    });\n  };\n  const updateProfile = profile => {\n    setUserProfile(profile);\n    saveLocalProfile(profile, token);\n    // send to back if logged in\n    if (token) {\n      import('./api').then(({\n        updateProfile\n      }) => {\n        updateProfile(token, profile).catch(() => {});\n      });\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      token,\n      login,\n      logout,\n      userProfile,\n      updateProfile\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n_s(AuthProvider, \"kURn2Waxiqc8b9hpoVHsDUJqP/Q=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["React","createContext","useState","useEffect","jsxDEV","_jsxDEV","AuthContext","AuthProvider","children","_s","token","setToken","localStorage","getItem","userProfile","setUserProfile","name","avatar","saveLocalProfile","profile","tkn","setItem","JSON","stringify","saved","parse","then","getProfile","res","prof","data","catch","login","newToken","logout","removeItem","updateProfile","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["E:/New folder/New folder/frontend/src/AuthContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\r\n\r\nexport const AuthContext = createContext();\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [token, setToken] = useState(localStorage.getItem('token'));\r\n  const [userProfile, setUserProfile] = useState({ name: '', avatar: '' });\r\n\r\n  // helper to stash locally\r\n  const saveLocalProfile = (profile, tkn) => {\r\n    if (tkn) {\r\n      try { localStorage.setItem('profile_' + tkn, JSON.stringify(profile)); } catch {}\r\n    }\r\n  };\r\n\r\n  // fetch profile from server when token changes (or load saved)\r\n  useEffect(() => {\r\n    if (token) {\r\n      // first load from storage so UI has something\r\n      const saved = localStorage.getItem('profile_' + token);\r\n      if (saved) {\r\n        try {\r\n          setUserProfile(JSON.parse(saved));\r\n        } catch {}\r\n      }\r\n      // then try to refresh from server\r\n      import('./api').then(({ getProfile }) => {\r\n        getProfile(token).then(res => {\r\n          const prof = { name: res.data.name || '', avatar: res.data.avatar || '' };\r\n          setUserProfile(prof);\r\n          saveLocalProfile(prof, token);\r\n        }).catch(() => {\r\n          // ignore\r\n        });\r\n      });\r\n    } else {\r\n      setUserProfile({ name: '', avatar: '' });\r\n    }\r\n  }, [token]);\r\n\r\n  const login = (newToken, profile) => {\r\n    setToken(newToken);\r\n    localStorage.setItem('token', newToken);\r\n    if (profile) {\r\n      setUserProfile(profile);\r\n      saveLocalProfile(profile, newToken);\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    setToken(null);\r\n    localStorage.removeItem('token');\r\n    setUserProfile({ name: '', avatar: '' });\r\n  };\r\n\r\n  const updateProfile = (profile) => {\r\n    setUserProfile(profile);\r\n    saveLocalProfile(profile, token);\r\n    // send to back if logged in\r\n    if (token) {\r\n      import('./api').then(({ updateProfile }) => {\r\n        updateProfile(token, profile).catch(() => {});\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ token, login, logout, userProfile, updateProfile }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}