{"ast":null,"code":"import React,{useState,useEffect,useRef,useCallback}from'react';import{useLanguage}from'./LanguageContext';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function Tutorial(_ref){let{visible,onClose}=_ref;const{t}=useLanguage();const[step,setStep]=useState(0);const[highlight,setHighlight]=useState(null);const retryCountRef=useRef(0);const currentTargetRef=useRef(null);const timeoutIdsRef=useRef([]);// Track pending timeouts to cancel on close\n// Steps: user must perform each action to advance\nconst steps=[{title:t('step1Title'),body:t('step1Body'),selector:'.add-habit-input',waitFor:'input',placement:'bottom'},{title:t('step2Title'),body:t('step2Body'),selector:'.add-habit-btn',waitFor:'habitAdded',placement:'bottom'},{title:t('step3Title'),body:t('step3Body'),selector:'.habit-complete-btn',waitFor:'habitCompleted',placement:'top'},{title:t('step4Title'),body:t('step4Body'),selector:'.habit-delete-btn',waitFor:'habitDeleted',placement:'top'}];const finish=useCallback(()=>{// Cancel all pending timeouts\ntimeoutIdsRef.current.forEach(id=>clearTimeout(id));timeoutIdsRef.current=[];// Remove highlight class from tracked element\nif(currentTargetRef.current){currentTargetRef.current.classList.remove('tutorial-target-active');currentTargetRef.current=null;}// Also remove from any element that might still have it\ndocument.querySelectorAll('.tutorial-target-active').forEach(el=>{el.classList.remove('tutorial-target-active');});setHighlight(null);try{localStorage.setItem('tutorialSeen','true');localStorage.removeItem('showGetStarted');}catch(e){}onClose();},[onClose]);// Add highlight class to target element and update position\nconst highlightElement=useCallback((el,placement)=>{// Remove from previous element\nif(currentTargetRef.current&&currentTargetRef.current!==el){currentTargetRef.current.classList.remove('tutorial-target-active');}if(el){el.classList.add('tutorial-target-active');currentTargetRef.current=el;const rect=el.getBoundingClientRect();setHighlight({top:rect.top,left:rect.left,width:rect.width,height:rect.height,placement:placement||'bottom'});}},[]);// Recalculate highlight position (for scroll/resize)\nconst recalculateHighlight=useCallback(currentStep=>{const s=steps[currentStep];if(!(s!==null&&s!==void 0&&s.selector))return;const el=document.querySelector(s.selector);if(!el)return;highlightElement(el,s.placement);},[steps,highlightElement]);// Position highlight box around the target element (with retry and scroll)\nconst updateHighlight=useCallback(currentStep=>{const s=steps[currentStep];if(!(s!==null&&s!==void 0&&s.selector)){setHighlight(null);return;}const el=document.querySelector(s.selector);if(!el){// Retry up to 15 times with 150ms delay\nif(retryCountRef.current<15){retryCountRef.current++;const id=setTimeout(()=>updateHighlight(currentStep),150);timeoutIdsRef.current.push(id);}return;}retryCountRef.current=0;// Scroll into view then highlight\nel.scrollIntoView({behavior:'smooth',block:'center',inline:'center'});const id=setTimeout(()=>{highlightElement(el,s.placement);},250);timeoutIdsRef.current.push(id);},[steps,highlightElement]);// Watch for user completing the current step's action\nuseEffect(()=>{if(!visible)return;const s=steps[step];if(!s)return;let observer=null;let intervalId=null;let initialHabitCount=document.querySelectorAll('ul li').length;const advanceStep=()=>{if(step<steps.length-1){setStep(prev=>prev+1);}else{finish();}};const checkCondition=()=>{switch(s.waitFor){case'input':{const input=document.querySelector('.add-habit-input');if(input&&input.value.trim().length>0){advanceStep();return true;}break;}case'habitAdded':{const currentCount=document.querySelectorAll('ul li').length;if(currentCount>initialHabitCount){advanceStep();return true;}break;}case'habitCompleted':{const doneIndicator=document.querySelector('.habit-done');if(doneIndicator){advanceStep();return true;}break;}case'habitDeleted':{const currentCount=document.querySelectorAll('ul li').length;if(currentCount<initialHabitCount||initialHabitCount>0&&currentCount===0){finish();return true;}break;}default:break;}return false;};// Use MutationObserver for immediate DOM change detection\nobserver=new MutationObserver(()=>{checkCondition();});observer.observe(document.body,{childList:true,subtree:true,attributes:true,characterData:true});// Poll for input changes (MutationObserver doesn't catch input value changes well)\nif(s.waitFor==='input'){intervalId=setInterval(checkCondition,100);}return()=>{if(observer)observer.disconnect();if(intervalId)clearInterval(intervalId);};},[visible,step,finish,steps]);// Update highlight when step changes\nuseEffect(()=>{if(visible){retryCountRef.current=0;updateHighlight(step);const handleUpdate=()=>recalculateHighlight(step);window.addEventListener('scroll',handleUpdate);window.addEventListener('resize',handleUpdate);return()=>{window.removeEventListener('scroll',handleUpdate);window.removeEventListener('resize',handleUpdate);};}},[visible,step,updateHighlight,recalculateHighlight]);// Reset step when opening, cleanup when closing\nuseEffect(()=>{if(visible){setStep(0);setHighlight(null);retryCountRef.current=0;timeoutIdsRef.current=[];}else{// Cancel all pending timeouts\ntimeoutIdsRef.current.forEach(id=>clearTimeout(id));timeoutIdsRef.current=[];if(currentTargetRef.current){currentTargetRef.current.classList.remove('tutorial-target-active');currentTargetRef.current=null;}// Also remove from any element that might still have it\ndocument.querySelectorAll('.tutorial-target-active').forEach(el=>{el.classList.remove('tutorial-target-active');});}},[visible]);if(!visible)return null;const s=steps[step];// Calculate card position - smart positioning to never go off screen\nconst cardWidth=300;const cardHeight=160;const padding=20;let cardStyle={position:'fixed',zIndex:100001,width:cardWidth+'px'};if(highlight){const vw=window.innerWidth;const vh=window.innerHeight;// Calculate available space in each direction\nconst spaceAbove=highlight.top-padding;const spaceBelow=vh-(highlight.top+highlight.height)-padding;const spaceLeft=highlight.left-padding;const spaceRight=vw-(highlight.left+highlight.width)-padding;// Determine best position based on available space\nlet bestPosition='below';// default\nif(spaceBelow>=cardHeight+20){bestPosition='below';}else if(spaceAbove>=cardHeight+20){bestPosition='above';}else if(spaceRight>=cardWidth+20){bestPosition='right';}else if(spaceLeft>=cardWidth+20){bestPosition='left';}else{// Fallback: position at top-left corner of viewport\nbestPosition='corner';}switch(bestPosition){case'below':cardStyle.top=highlight.top+highlight.height+20;cardStyle.left=Math.max(padding,Math.min(highlight.left,vw-cardWidth-padding));break;case'above':cardStyle.top=highlight.top-cardHeight-20;cardStyle.left=Math.max(padding,Math.min(highlight.left,vw-cardWidth-padding));break;case'right':cardStyle.top=Math.max(padding,Math.min(highlight.top,vh-cardHeight-padding));cardStyle.left=highlight.left+highlight.width+20;break;case'left':cardStyle.top=Math.max(padding,Math.min(highlight.top,vh-cardHeight-padding));cardStyle.left=highlight.left-cardWidth-20;break;case'corner':default:cardStyle.top=padding;cardStyle.left=padding;break;}}else{// Center the card if no highlight yet\ncardStyle.top='50%';cardStyle.left='50%';cardStyle.transform='translate(-50%, -50%)';}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"tutorial-overlay-light\"}),highlight&&/*#__PURE__*/_jsx(\"div\",{className:\"tutorial-highlight\",style:{top:highlight.top-6,left:highlight.left-6,width:highlight.width+12,height:highlight.height+12}}),/*#__PURE__*/_jsxs(\"div\",{className:\"tutorial-card tutorial-card--floating\",role:\"dialog\",\"aria-modal\":\"false\",style:cardStyle,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tutorial-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tutorial-step\",children:[t('tutorialStep'),\" \",step+1,\" / \",steps.length]}),/*#__PURE__*/_jsx(\"button\",{className:\"tutorial-skip\",onClick:finish,children:t('skip')})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"tutorial-title\",children:s.title}),/*#__PURE__*/_jsx(\"p\",{className:\"tutorial-body\",children:s.body})]})]});}","map":{"version":3,"names":["React","useState","useEffect","useRef","useCallback","useLanguage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Tutorial","_ref","visible","onClose","t","step","setStep","highlight","setHighlight","retryCountRef","currentTargetRef","timeoutIdsRef","steps","title","body","selector","waitFor","placement","finish","current","forEach","id","clearTimeout","classList","remove","document","querySelectorAll","el","localStorage","setItem","removeItem","e","highlightElement","add","rect","getBoundingClientRect","top","left","width","height","recalculateHighlight","currentStep","s","querySelector","updateHighlight","setTimeout","push","scrollIntoView","behavior","block","inline","observer","intervalId","initialHabitCount","length","advanceStep","prev","checkCondition","input","value","trim","currentCount","doneIndicator","MutationObserver","observe","childList","subtree","attributes","characterData","setInterval","disconnect","clearInterval","handleUpdate","window","addEventListener","removeEventListener","cardWidth","cardHeight","padding","cardStyle","position","zIndex","vw","innerWidth","vh","innerHeight","spaceAbove","spaceBelow","spaceLeft","spaceRight","bestPosition","Math","max","min","transform","children","className","style","role","onClick"],"sources":["E:/New folder/New folder/frontend/src/Tutorial.js"],"sourcesContent":["import React, { useState, useEffect, useRef, useCallback } from 'react';\r\nimport { useLanguage } from './LanguageContext';\r\n\r\nexport default function Tutorial({ visible, onClose }) {\r\n  const { t } = useLanguage();\r\n  const [step, setStep] = useState(0);\r\n  const [highlight, setHighlight] = useState(null);\r\n  const retryCountRef = useRef(0);\r\n  const currentTargetRef = useRef(null);\r\n  const timeoutIdsRef = useRef([]); // Track pending timeouts to cancel on close\r\n\r\n  // Steps: user must perform each action to advance\r\n  const steps = [\r\n    {\r\n      title: t('step1Title'),\r\n      body: t('step1Body'),\r\n      selector: '.add-habit-input',\r\n      waitFor: 'input',\r\n      placement: 'bottom'\r\n    },\r\n    {\r\n      title: t('step2Title'),\r\n      body: t('step2Body'),\r\n      selector: '.add-habit-btn',\r\n      waitFor: 'habitAdded',\r\n      placement: 'bottom'\r\n    },\r\n    {\r\n      title: t('step3Title'),\r\n      body: t('step3Body'),\r\n      selector: '.habit-complete-btn',\r\n      waitFor: 'habitCompleted',\r\n      placement: 'top'\r\n    },\r\n    {\r\n      title: t('step4Title'),\r\n      body: t('step4Body'),\r\n      selector: '.habit-delete-btn',\r\n      waitFor: 'habitDeleted',\r\n      placement: 'top'\r\n    }\r\n  ];\r\n\r\n  const finish = useCallback(() => {\r\n    // Cancel all pending timeouts\r\n    timeoutIdsRef.current.forEach(id => clearTimeout(id));\r\n    timeoutIdsRef.current = [];\r\n    \r\n    // Remove highlight class from tracked element\r\n    if (currentTargetRef.current) {\r\n      currentTargetRef.current.classList.remove('tutorial-target-active');\r\n      currentTargetRef.current = null;\r\n    }\r\n    // Also remove from any element that might still have it\r\n    document.querySelectorAll('.tutorial-target-active').forEach(el => {\r\n      el.classList.remove('tutorial-target-active');\r\n    });\r\n    setHighlight(null);\r\n    try {\r\n      localStorage.setItem('tutorialSeen', 'true');\r\n      localStorage.removeItem('showGetStarted');\r\n    } catch (e) {}\r\n    onClose();\r\n  }, [onClose]);\r\n\r\n  // Add highlight class to target element and update position\r\n  const highlightElement = useCallback((el, placement) => {\r\n    // Remove from previous element\r\n    if (currentTargetRef.current && currentTargetRef.current !== el) {\r\n      currentTargetRef.current.classList.remove('tutorial-target-active');\r\n    }\r\n    \r\n    if (el) {\r\n      el.classList.add('tutorial-target-active');\r\n      currentTargetRef.current = el;\r\n      \r\n      const rect = el.getBoundingClientRect();\r\n      setHighlight({\r\n        top: rect.top,\r\n        left: rect.left,\r\n        width: rect.width,\r\n        height: rect.height,\r\n        placement: placement || 'bottom'\r\n      });\r\n    }\r\n  }, []);\r\n\r\n  // Recalculate highlight position (for scroll/resize)\r\n  const recalculateHighlight = useCallback((currentStep) => {\r\n    const s = steps[currentStep];\r\n    if (!s?.selector) return;\r\n    const el = document.querySelector(s.selector);\r\n    if (!el) return;\r\n    highlightElement(el, s.placement);\r\n  }, [steps, highlightElement]);\r\n\r\n  // Position highlight box around the target element (with retry and scroll)\r\n  const updateHighlight = useCallback((currentStep) => {\r\n    const s = steps[currentStep];\r\n    if (!s?.selector) {\r\n      setHighlight(null);\r\n      return;\r\n    }\r\n    const el = document.querySelector(s.selector);\r\n    if (!el) {\r\n      // Retry up to 15 times with 150ms delay\r\n      if (retryCountRef.current < 15) {\r\n        retryCountRef.current++;\r\n        const id = setTimeout(() => updateHighlight(currentStep), 150);\r\n        timeoutIdsRef.current.push(id);\r\n      }\r\n      return;\r\n    }\r\n    retryCountRef.current = 0;\r\n    \r\n    // Scroll into view then highlight\r\n    el.scrollIntoView({ behavior: 'smooth', block: 'center', inline: 'center' });\r\n    \r\n    const id = setTimeout(() => {\r\n      highlightElement(el, s.placement);\r\n    }, 250);\r\n    timeoutIdsRef.current.push(id);\r\n  }, [steps, highlightElement]);\r\n\r\n  // Watch for user completing the current step's action\r\n  useEffect(() => {\r\n    if (!visible) return;\r\n\r\n    const s = steps[step];\r\n    if (!s) return;\r\n\r\n    let observer = null;\r\n    let intervalId = null;\r\n    let initialHabitCount = document.querySelectorAll('ul li').length;\r\n\r\n    const advanceStep = () => {\r\n      if (step < steps.length - 1) {\r\n        setStep(prev => prev + 1);\r\n      } else {\r\n        finish();\r\n      }\r\n    };\r\n\r\n    const checkCondition = () => {\r\n      switch (s.waitFor) {\r\n        case 'input': {\r\n          const input = document.querySelector('.add-habit-input');\r\n          if (input && input.value.trim().length > 0) {\r\n            advanceStep();\r\n            return true;\r\n          }\r\n          break;\r\n        }\r\n        case 'habitAdded': {\r\n          const currentCount = document.querySelectorAll('ul li').length;\r\n          if (currentCount > initialHabitCount) {\r\n            advanceStep();\r\n            return true;\r\n          }\r\n          break;\r\n        }\r\n        case 'habitCompleted': {\r\n          const doneIndicator = document.querySelector('.habit-done');\r\n          if (doneIndicator) {\r\n            advanceStep();\r\n            return true;\r\n          }\r\n          break;\r\n        }\r\n        case 'habitDeleted': {\r\n          const currentCount = document.querySelectorAll('ul li').length;\r\n          if (currentCount < initialHabitCount || (initialHabitCount > 0 && currentCount === 0)) {\r\n            finish();\r\n            return true;\r\n          }\r\n          break;\r\n        }\r\n        default:\r\n          break;\r\n      }\r\n      return false;\r\n    };\r\n\r\n    // Use MutationObserver for immediate DOM change detection\r\n    observer = new MutationObserver(() => {\r\n      checkCondition();\r\n    });\r\n    \r\n    observer.observe(document.body, {\r\n      childList: true,\r\n      subtree: true,\r\n      attributes: true,\r\n      characterData: true\r\n    });\r\n\r\n    // Poll for input changes (MutationObserver doesn't catch input value changes well)\r\n    if (s.waitFor === 'input') {\r\n      intervalId = setInterval(checkCondition, 100);\r\n    }\r\n\r\n    return () => {\r\n      if (observer) observer.disconnect();\r\n      if (intervalId) clearInterval(intervalId);\r\n    };\r\n  }, [visible, step, finish, steps]);\r\n\r\n  // Update highlight when step changes\r\n  useEffect(() => {\r\n    if (visible) {\r\n      retryCountRef.current = 0;\r\n      updateHighlight(step);\r\n      \r\n      const handleUpdate = () => recalculateHighlight(step);\r\n      window.addEventListener('scroll', handleUpdate);\r\n      window.addEventListener('resize', handleUpdate);\r\n      return () => {\r\n        window.removeEventListener('scroll', handleUpdate);\r\n        window.removeEventListener('resize', handleUpdate);\r\n      };\r\n    }\r\n  }, [visible, step, updateHighlight, recalculateHighlight]);\r\n\r\n  // Reset step when opening, cleanup when closing\r\n  useEffect(() => {\r\n    if (visible) {\r\n      setStep(0);\r\n      setHighlight(null);\r\n      retryCountRef.current = 0;\r\n      timeoutIdsRef.current = [];\r\n    } else {\r\n      // Cancel all pending timeouts\r\n      timeoutIdsRef.current.forEach(id => clearTimeout(id));\r\n      timeoutIdsRef.current = [];\r\n      \r\n      if (currentTargetRef.current) {\r\n        currentTargetRef.current.classList.remove('tutorial-target-active');\r\n        currentTargetRef.current = null;\r\n      }\r\n      // Also remove from any element that might still have it\r\n      document.querySelectorAll('.tutorial-target-active').forEach(el => {\r\n        el.classList.remove('tutorial-target-active');\r\n      });\r\n    }\r\n  }, [visible]);\r\n\r\n  if (!visible) return null;\r\n\r\n  const s = steps[step];\r\n\r\n  // Calculate card position - smart positioning to never go off screen\r\n  const cardWidth = 300;\r\n  const cardHeight = 160;\r\n  const padding = 20;\r\n  \r\n  let cardStyle = {\r\n    position: 'fixed',\r\n    zIndex: 100001,\r\n    width: cardWidth + 'px'\r\n  };\r\n  \r\n  if (highlight) {\r\n    const vw = window.innerWidth;\r\n    const vh = window.innerHeight;\r\n    \r\n    // Calculate available space in each direction\r\n    const spaceAbove = highlight.top - padding;\r\n    const spaceBelow = vh - (highlight.top + highlight.height) - padding;\r\n    const spaceLeft = highlight.left - padding;\r\n    const spaceRight = vw - (highlight.left + highlight.width) - padding;\r\n    \r\n    // Determine best position based on available space\r\n    let bestPosition = 'below'; // default\r\n    \r\n    if (spaceBelow >= cardHeight + 20) {\r\n      bestPosition = 'below';\r\n    } else if (spaceAbove >= cardHeight + 20) {\r\n      bestPosition = 'above';\r\n    } else if (spaceRight >= cardWidth + 20) {\r\n      bestPosition = 'right';\r\n    } else if (spaceLeft >= cardWidth + 20) {\r\n      bestPosition = 'left';\r\n    } else {\r\n      // Fallback: position at top-left corner of viewport\r\n      bestPosition = 'corner';\r\n    }\r\n    \r\n    switch (bestPosition) {\r\n      case 'below':\r\n        cardStyle.top = highlight.top + highlight.height + 20;\r\n        cardStyle.left = Math.max(padding, Math.min(highlight.left, vw - cardWidth - padding));\r\n        break;\r\n      case 'above':\r\n        cardStyle.top = highlight.top - cardHeight - 20;\r\n        cardStyle.left = Math.max(padding, Math.min(highlight.left, vw - cardWidth - padding));\r\n        break;\r\n      case 'right':\r\n        cardStyle.top = Math.max(padding, Math.min(highlight.top, vh - cardHeight - padding));\r\n        cardStyle.left = highlight.left + highlight.width + 20;\r\n        break;\r\n      case 'left':\r\n        cardStyle.top = Math.max(padding, Math.min(highlight.top, vh - cardHeight - padding));\r\n        cardStyle.left = highlight.left - cardWidth - 20;\r\n        break;\r\n      case 'corner':\r\n      default:\r\n        cardStyle.top = padding;\r\n        cardStyle.left = padding;\r\n        break;\r\n    }\r\n  } else {\r\n    // Center the card if no highlight yet\r\n    cardStyle.top = '50%';\r\n    cardStyle.left = '50%';\r\n    cardStyle.transform = 'translate(-50%, -50%)';\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {/* Light overlay that allows interaction */}\r\n      <div className=\"tutorial-overlay-light\" />\r\n\r\n      {/* Highlight box around target element */}\r\n      {highlight && (\r\n        <div\r\n          className=\"tutorial-highlight\"\r\n          style={{\r\n            top: highlight.top - 6,\r\n            left: highlight.left - 6,\r\n            width: highlight.width + 12,\r\n            height: highlight.height + 12\r\n          }}\r\n        />\r\n      )}\r\n\r\n      {/* Instruction card */}\r\n      <div\r\n        className=\"tutorial-card tutorial-card--floating\"\r\n        role=\"dialog\"\r\n        aria-modal=\"false\"\r\n        style={cardStyle}\r\n      >\r\n        <div className=\"tutorial-header\">\r\n          <div className=\"tutorial-step\">{t('tutorialStep')} {step + 1} / {steps.length}</div>\r\n          <button className=\"tutorial-skip\" onClick={finish}>{t('skip')}</button>\r\n        </div>\r\n        <h3 className=\"tutorial-title\">{s.title}</h3>\r\n        <p className=\"tutorial-body\">{s.body}</p>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}