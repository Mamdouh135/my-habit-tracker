{"ast":null,"code":"import React,{useContext,useState,useRef}from'react';import{AuthContext}from'./AuthContext';import LoginRegister from'./LoginRegister';import Habits from'./Habits';import AboutMe from'./AboutMe';import ContactMe from'./ContactMe';import Tutorial from'./Tutorial';import{getMe,resetTutorial}from'./api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const{token}=useContext(AuthContext);const[page,setPage]=useState('home');const[dark,setDark]=useState(false);const[showTutorial,setShowTutorial]=useState(false);const[tutorialSeen,setTutorialSeen]=useState(!!localStorage.getItem('tutorialSeen'));const contactRef=useRef(null);React.useEffect(()=>{document.body.classList.toggle('dark',dark);},[dark]);// Sync server/local tutorialSeen state and show the initial 'Get Started' prompt bubble (NOT auto-opening tutorial)\nReact.useEffect(()=>{const sync=async()=>{if(!token){const seenLocal=localStorage.getItem('tutorialSeen')==='true';setTutorialSeen(seenLocal);return;}try{var _res$data;const res=await getMe(token);const serverSeen=!!((_res$data=res.data)!==null&&_res$data!==void 0&&_res$data.tutorialSeen);if(serverSeen){localStorage.setItem('tutorialSeen','true');setTutorialSeen(true);return;}}catch(e){// server unavailable, fall back to localStorage\n}const seenLocal=localStorage.getItem('tutorialSeen')==='true';setTutorialSeen(seenLocal);// do NOT auto-open tutorial; instead show the top-left prompt bubble (render logic uses `tutorialSeen`)\n};sync();},[token]);const handleScrollToContact=()=>{if(contactRef.current){contactRef.current.scrollIntoView({behavior:'smooth'});}};const promptVisible=!!(token&&!tutorialSeen);// first-time login prompt\nconst promptActive=promptVisible&&!showTutorial;// hide prompt while tutorial overlay is open\nReact.useEffect(()=>{console.log('showTutorial=',showTutorial,'tutorialSeen=',tutorialSeen,'promptVisible=',promptVisible);},[showTutorial,tutorialSeen]);return/*#__PURE__*/_jsxs(\"div\",{id:\"layout\",className:promptActive?'tutorial-prompt-active':'',children:[/*#__PURE__*/_jsxs(\"header\",{className:\"site-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-logo\",children:\"\\uD83C\\uDF31\"}),/*#__PURE__*/_jsx(\"div\",{className:\"header-title\",children:\"Habit Tracker SaaS\"}),/*#__PURE__*/_jsx(\"div\",{className:\"header-subtitle\",children:\"Track your habits, grow your life\"}),/*#__PURE__*/_jsx(\"button\",{className:\"header-contact-btn\",onClick:handleScrollToContact,children:\"Contact Me\"})]}),promptActive&&/*#__PURE__*/_jsx(\"div\",{className:\"getstarted-center\",role:\"dialog\",\"aria-modal\":\"true\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"getstarted-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome \\u2014 Get Started\"}),/*#__PURE__*/_jsx(\"p\",{className:\"muted\",children:\"A short walkthrough will show how to add and complete habits.\"}),/*#__PURE__*/_jsx(\"div\",{className:\"getstarted-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"getstarted-btn\",onClick:()=>{console.log('Get Started clicked â€” opening tutorial');setShowTutorial(true);},children:\"Get Started\"})})]})}),token&&tutorialSeen&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:8},children:[/*#__PURE__*/_jsx(\"button\",{className:\"tutorial-replay replay\",title:'Show tutorial',\"aria-label\":'Show tutorial',onClick:()=>setShowTutorial(true),children:\"\\uD83D\\uDEC8\"}),/*#__PURE__*/_jsx(\"button\",{className:\"tutorial-reset\",onClick:async()=>{try{await resetTutorial(token);localStorage.removeItem('tutorialSeen');setTutorialSeen(false);}catch(e){/* ignore */}},title:\"Reset tutorial\",children:\"Reset\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-wrapper\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"sidebar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-title\",children:\"Navigation\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sidebar-link\".concat(page==='home'?' active':''),onClick:()=>setPage('home'),children:\"Home\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sidebar-link\".concat(page==='about'?' active':''),onClick:()=>setPage('about'),children:\"About Me\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sidebar-dark-toggle\",onClick:()=>setDark(d=>!d),children:dark?'Light Mode':'Dark Mode'})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"main-content\",children:[page==='about'?/*#__PURE__*/_jsx(AboutMe,{}):token?/*#__PURE__*/_jsx(Habits,{}):/*#__PURE__*/_jsx(LoginRegister,{}),/*#__PURE__*/_jsx(\"div\",{ref:contactRef,id:\"contact-section\",children:/*#__PURE__*/_jsx(ContactMe,{})})]}),/*#__PURE__*/_jsx(Tutorial,{visible:showTutorial,onClose:()=>{setShowTutorial(false);setTutorialSeen(true);},token:token,setPage:setPage})]}),/*#__PURE__*/_jsxs(\"footer\",{className:\"site-footer\",children:[\"\\xA9 \",new Date().getFullYear(),\" Habit Tracker SaaS. All rights reserved. | Created by Mamdouh\"]})]});}export default App;","map":{"version":3,"names":["React","useContext","useState","useRef","AuthContext","LoginRegister","Habits","AboutMe","ContactMe","Tutorial","getMe","resetTutorial","jsx","_jsx","jsxs","_jsxs","App","token","page","setPage","dark","setDark","showTutorial","setShowTutorial","tutorialSeen","setTutorialSeen","localStorage","getItem","contactRef","useEffect","document","body","classList","toggle","sync","seenLocal","_res$data","res","serverSeen","data","setItem","e","handleScrollToContact","current","scrollIntoView","behavior","promptVisible","promptActive","console","log","id","className","children","onClick","role","style","display","flexDirection","gap","title","removeItem","concat","d","ref","visible","onClose","Date","getFullYear"],"sources":["E:/New folder/New folder/frontend/src/App.js"],"sourcesContent":["import React, { useContext, useState, useRef } from 'react';\r\nimport { AuthContext } from './AuthContext';\r\nimport LoginRegister from './LoginRegister';\r\nimport Habits from './Habits';\r\nimport AboutMe from './AboutMe';\r\nimport ContactMe from './ContactMe';\r\nimport Tutorial from './Tutorial';\r\nimport { getMe, resetTutorial } from './api';\r\nfunction App() {\r\n  const { token } = useContext(AuthContext);\r\n  const [page, setPage] = useState('home');\r\n  const [dark, setDark] = useState(false);\r\n  const [showTutorial, setShowTutorial] = useState(false);\r\n  const [tutorialSeen, setTutorialSeen] = useState(!!localStorage.getItem('tutorialSeen'));\r\n  const contactRef = useRef(null);\r\n\r\n  React.useEffect(() => {\r\n    document.body.classList.toggle('dark', dark);\r\n  }, [dark]);\r\n\r\n  // Sync server/local tutorialSeen state and show the initial 'Get Started' prompt bubble (NOT auto-opening tutorial)\r\n  React.useEffect(() => {\r\n    const sync = async () => {\r\n      if (!token) {\r\n        const seenLocal = localStorage.getItem('tutorialSeen') === 'true';\r\n        setTutorialSeen(seenLocal);\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const res = await getMe(token);\r\n        const serverSeen = !!res.data?.tutorialSeen;\r\n        if (serverSeen) {\r\n          localStorage.setItem('tutorialSeen', 'true');\r\n          setTutorialSeen(true);\r\n          return;\r\n        }\r\n      } catch (e) {\r\n        // server unavailable, fall back to localStorage\r\n      }\r\n\r\n      const seenLocal = localStorage.getItem('tutorialSeen') === 'true';\r\n      setTutorialSeen(seenLocal);\r\n      // do NOT auto-open tutorial; instead show the top-left prompt bubble (render logic uses `tutorialSeen`)\r\n    };\r\n    sync();\r\n  }, [token]);\r\n\r\n  const handleScrollToContact = () => {\r\n    if (contactRef.current) {\r\n      contactRef.current.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  };\r\n\r\n  const promptVisible = !!(token && !tutorialSeen); // first-time login prompt\r\n  const promptActive = promptVisible && !showTutorial; // hide prompt while tutorial overlay is open\r\n\r\n  React.useEffect(() => { console.log('showTutorial=', showTutorial, 'tutorialSeen=', tutorialSeen, 'promptVisible=', promptVisible); }, [showTutorial, tutorialSeen]);\r\n  return (\r\n    <div id=\"layout\" className={promptActive ? 'tutorial-prompt-active' : ''}>\r\n      <header className=\"site-header\">\r\n        <div className=\"header-logo\">ðŸŒ±</div>\r\n        <div className=\"header-title\">Habit Tracker SaaS</div>\r\n        <div className=\"header-subtitle\">Track your habits, grow your life</div>\r\n        <button className=\"header-contact-btn\" onClick={handleScrollToContact}>Contact Me</button>\r\n      </header>\r\n      {/* Centered Get Started prompt for first-time logged-in users */}\r\n      {promptActive && (\r\n        <div className=\"getstarted-center\" role=\"dialog\" aria-modal=\"true\">\r\n          <div className=\"getstarted-card\">\r\n            <h2>Welcome â€” Get Started</h2>\r\n            <p className=\"muted\">A short walkthrough will show how to add and complete habits.</p>\r\n            <div className=\"getstarted-actions\">\r\n              <button className=\"getstarted-btn\" onClick={() => { console.log('Get Started clicked â€” opening tutorial'); setShowTutorial(true); }}>Get Started</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* replay bubble â€” shown after tutorial was seen so user can re-open it */}\r\n      {token && tutorialSeen && (\r\n        <div style={{display:'flex',flexDirection:'column',gap:8}}>\r\n          <button\r\n            className={`tutorial-replay replay`}\r\n            title={'Show tutorial'}\r\n            aria-label={'Show tutorial'}\r\n            onClick={() => setShowTutorial(true)}\r\n          >\r\n            ðŸ›ˆ\r\n          </button>\r\n          <button className=\"tutorial-reset\" onClick={async () => { try { await resetTutorial(token); localStorage.removeItem('tutorialSeen'); setTutorialSeen(false); } catch(e){ /* ignore */ } }} title=\"Reset tutorial\">Reset</button>\r\n        </div>\r\n      )}\r\n      <div className=\"main-wrapper\">\r\n        <aside className=\"sidebar\">\r\n          <div className=\"sidebar-title\">Navigation</div>\r\n          <button className={`sidebar-link${page==='home'?' active':''}`} onClick={() => setPage('home')}>Home</button>\r\n          <button className={`sidebar-link${page==='about'?' active':''}`} onClick={() => setPage('about')}>About Me</button>\r\n          <button className=\"sidebar-dark-toggle\" onClick={() => setDark(d => !d)}>\r\n            {dark ? 'Light Mode' : 'Dark Mode'}\r\n          </button>\r\n        </aside>\r\n        <main className=\"main-content\">\r\n          {page === 'about' ? <AboutMe /> : (token ? <Habits /> : <LoginRegister />)}\r\n          {/* ContactMe at end of landing page */}\r\n          <div ref={contactRef} id=\"contact-section\">\r\n            <ContactMe />\r\n          </div>\r\n        </main>\r\n        {/* Render tutorial at root level so it truly pops up above everything */}\r\n          <Tutorial visible={showTutorial} onClose={() => { setShowTutorial(false); setTutorialSeen(true); }} token={token} setPage={setPage} />\r\n      </div>\r\n      <footer className=\"site-footer\">\r\n        &copy; {new Date().getFullYear()} Habit Tracker SaaS. All rights reserved. | Created by Mamdouh\r\n      </footer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}