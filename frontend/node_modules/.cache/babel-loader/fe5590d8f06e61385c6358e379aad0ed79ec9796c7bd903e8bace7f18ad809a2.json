{"ast":null,"code":"import React,{useState,useContext,useEffect}from'react';import{register,login}from'./api';import{AuthContext}from'./AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function LoginRegister(_ref){let{initial}=_ref;const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[isRegister,setIsRegister]=useState(false);const[error,setError]=useState('');const{login:doLogin}=useContext(AuthContext);useEffect(()=>{// allow hero CTA or App to pre-select the register/login tab via prop\nif(initial==='register')setIsRegister(true);if(initial==='login')setIsRegister(false);},[initial]);const handleSubmit=async e=>{e.preventDefault();setError('');try{if(isRegister){await register(username,password);setIsRegister(false);}else{const res=await login(username,password);doLogin(res.data.token);}}catch(e){var _e$response,_e$response$data;setError(((_e$response=e.response)===null||_e$response===void 0?void 0:(_e$response$data=_e$response.data)===null||_e$response$data===void 0?void 0:_e$response$data.error)||'Error');}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:isRegister?'Register':'Login'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Username\",value:username,onChange:e=>setUsername(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Password\",type:\"password\",value:password,onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:isRegister?'Register':'Login'})]}),/*#__PURE__*/_jsx(\"button\",{className:\"auth-toggle\",onClick:()=>setIsRegister(r=>!r),children:isRegister?'Have an account? Login':'No account? Register'}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error})]});}","map":{"version":3,"names":["React","useState","useContext","useEffect","register","login","AuthContext","jsx","_jsx","jsxs","_jsxs","LoginRegister","_ref","initial","username","setUsername","password","setPassword","isRegister","setIsRegister","error","setError","doLogin","handleSubmit","e","preventDefault","res","data","token","_e$response","_e$response$data","response","children","onSubmit","placeholder","value","onChange","target","type","className","onClick","r"],"sources":["E:/New folder/New folder/frontend/src/LoginRegister.js"],"sourcesContent":["import React, { useState, useContext, useEffect } from 'react';\r\nimport { register, login } from './api';\r\nimport { AuthContext } from './AuthContext';\r\n\r\nexport default function LoginRegister({ initial }) {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [isRegister, setIsRegister] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const { login: doLogin } = useContext(AuthContext);\r\n\r\n  useEffect(() => {\r\n    // allow hero CTA or App to pre-select the register/login tab via prop\r\n    if (initial === 'register') setIsRegister(true);\r\n    if (initial === 'login') setIsRegister(false);\r\n  }, [initial]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    try {\r\n      if (isRegister) {\r\n        await register(username, password);\r\n        setIsRegister(false);\r\n      } else {\r\n        const res = await login(username, password);\r\n        doLogin(res.data.token);\r\n      }\r\n    } catch (e) {\r\n      setError(e.response?.data?.error || 'Error');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>{isRegister ? 'Register' : 'Login'}</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        <input placeholder=\"Username\" value={username} onChange={e => setUsername(e.target.value)} />\r\n        <input placeholder=\"Password\" type=\"password\" value={password} onChange={e => setPassword(e.target.value)} />\r\n        <button type=\"submit\">{isRegister ? 'Register' : 'Login'}</button>\r\n      </form>\r\n      <button className=\"auth-toggle\" onClick={() => setIsRegister(r => !r)}>\r\n        {isRegister ? 'Have an account? Login' : 'No account? Register'}\r\n      </button>\r\n      {error && <div className=\"error\">{error}</div>}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}