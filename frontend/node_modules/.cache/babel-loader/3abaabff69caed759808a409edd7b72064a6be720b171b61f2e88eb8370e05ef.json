{"ast":null,"code":"import React,{useContext,useState,useRef,useEffect}from'react';import{AuthContext}from'./AuthContext';import LoginRegister from'./LoginRegister';import Habits from'./Habits';import AboutMe from'./AboutMe';import ContactMe from'./ContactMe';import Hero from'./Hero';import Tutorial from'./Tutorial';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){const{token}=useContext(AuthContext);const[page,setPage]=useState('home');const[dark,setDark]=useState(false);const[authInitial,setAuthInitial]=useState(null);// 'register' | 'login' | null\nconst[showTutorial,setShowTutorial]=useState(false);const[showGetStartedFlag,setShowGetStartedFlag]=useState(false);const[showBackToTop,setShowBackToTop]=useState(false);const contactRef=useRef(null);React.useEffect(()=>{document.body.classList.toggle('dark',dark);},[dark]);// Handle scroll detection for Back to Top button\nuseEffect(()=>{const handleScroll=()=>{const scrollY=window.scrollY||window.pageYOffset||0;const shouldShow=scrollY>100;setShowBackToTop(shouldShow);};window.addEventListener('scroll',handleScroll,{passive:true});// Check initial position\nhandleScroll();return()=>{window.removeEventListener('scroll',handleScroll);};},[]);// Reflect localStorage flag into React state and auto-open tutorial after first login\nReact.useEffect(()=>{const shouldShow=!!(token&&localStorage.getItem('showGetStarted')==='true'&&localStorage.getItem('tutorialSeen')!=='true');setShowGetStartedFlag(shouldShow);// Check for immediate tutorial trigger (set during registration)\nconst autoShow=localStorage.getItem('autoShowTutorial')==='true';if(token&&(shouldShow||autoShow)){// Small delay to ensure Habits component renders first\nsetTimeout(()=>{setShowTutorial(true);localStorage.removeItem('autoShowTutorial');},600);}},[token]);const handleScrollToContact=()=>{if(contactRef.current){contactRef.current.scrollIntoView({behavior:'smooth'});}};const handleBackToTop=()=>{// Enhanced smooth scroll implementation\nconst scrollToTop=()=>{const scrollStep=-window.scrollY/(500/15);if(window.scrollY!==0){window.requestAnimationFrame(scrollToTop);window.scrollTo(0,window.scrollY+scrollStep);}};// Try modern smooth scroll first, fallback to custom\ntry{window.scrollTo({top:0,left:0,behavior:'smooth'});}catch(e){scrollToTop();}};return/*#__PURE__*/_jsxs(\"div\",{id:\"layout\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"site-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-logo\",children:\"\\uD83C\\uDF31\"}),/*#__PURE__*/_jsx(\"div\",{className:\"header-title\",children:\"Habit Tracker SaaS\"}),/*#__PURE__*/_jsx(\"div\",{className:\"header-subtitle\",children:\"Track your habits, grow your life\"}),/*#__PURE__*/_jsx(\"button\",{className:\"header-contact-btn\",onClick:handleScrollToContact,children:\"Contact Me\"})]}),/*#__PURE__*/_jsx(Hero,{contactRef:contactRef,setPage:setPage,token:token,setAuthInitial:setAuthInitial,showGetStarted:showGetStartedFlag,openTutorial:()=>setShowTutorial(true)}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-wrapper\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"sidebar\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-title\",children:\"Navigation\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sidebar-link\".concat(page==='home'?' active':''),onClick:()=>setPage('home'),children:\"Home\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sidebar-link\".concat(page==='about'?' active':''),onClick:()=>setPage('about'),children:\"About Me\"}),/*#__PURE__*/_jsx(\"button\",{className:\"sidebar-dark-toggle\",onClick:()=>setDark(d=>!d),children:dark?'Light Mode':'Dark Mode'})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"main-content\",children:[page==='about'?/*#__PURE__*/_jsx(AboutMe,{}):token?/*#__PURE__*/_jsx(Habits,{}):/*#__PURE__*/_jsx(LoginRegister,{initial:authInitial}),/*#__PURE__*/_jsx(\"div\",{ref:contactRef,id:\"contact-section\",children:/*#__PURE__*/_jsx(ContactMe,{})})]}),/*#__PURE__*/_jsx(Tutorial,{visible:showTutorial,onClose:()=>setShowTutorial(false)})]}),token&&!showTutorial&&/*#__PURE__*/_jsx(\"button\",{className:\"tutorial-help-btn\",onClick:()=>setShowTutorial(true),title:\"Show tutorial\",\"aria-label\":\"Show tutorial\",children:\"?\"}),/*#__PURE__*/_jsxs(\"footer\",{className:\"site-footer\",children:[\"\\xA9 \",new Date().getFullYear(),\" Habit Tracker SaaS. All rights reserved. | Created by Mamdouh\"]}),showBackToTop&&/*#__PURE__*/_jsx(\"button\",{className:\"back-to-top-btn\",onClick:handleBackToTop,\"aria-label\":\"Back to top\",title:\"Back to top\",children:/*#__PURE__*/_jsx(\"span\",{className:\"back-to-top-icon\",children:\"\\u2191\"})})]});}export default App;","map":{"version":3,"names":["React","useContext","useState","useRef","useEffect","AuthContext","LoginRegister","Habits","AboutMe","ContactMe","Hero","Tutorial","jsx","_jsx","jsxs","_jsxs","App","token","page","setPage","dark","setDark","authInitial","setAuthInitial","showTutorial","setShowTutorial","showGetStartedFlag","setShowGetStartedFlag","showBackToTop","setShowBackToTop","contactRef","document","body","classList","toggle","handleScroll","scrollY","window","pageYOffset","shouldShow","addEventListener","passive","removeEventListener","localStorage","getItem","autoShow","setTimeout","removeItem","handleScrollToContact","current","scrollIntoView","behavior","handleBackToTop","scrollToTop","scrollStep","requestAnimationFrame","scrollTo","top","left","e","id","children","className","onClick","showGetStarted","openTutorial","concat","d","initial","ref","visible","onClose","title","Date","getFullYear"],"sources":["E:/New folder/New folder/frontend/src/App.js"],"sourcesContent":["import React, { useContext, useState, useRef, useEffect } from 'react';\r\nimport { AuthContext } from './AuthContext';\r\nimport LoginRegister from './LoginRegister';\r\nimport Habits from './Habits';\r\nimport AboutMe from './AboutMe';\r\nimport ContactMe from './ContactMe';\r\nimport Hero from './Hero';\r\nimport Tutorial from './Tutorial';\r\nfunction App() {\r\n  const { token } = useContext(AuthContext);\r\n  const [page, setPage] = useState('home');\r\n  const [dark, setDark] = useState(false);\r\n  const [authInitial, setAuthInitial] = useState(null); // 'register' | 'login' | null\r\n  const [showTutorial, setShowTutorial] = useState(false);\r\n  const [showGetStartedFlag, setShowGetStartedFlag] = useState(false);\r\n  const [showBackToTop, setShowBackToTop] = useState(false);\r\n  const contactRef = useRef(null);\r\n\r\n  React.useEffect(() => {\r\n    document.body.classList.toggle('dark', dark);\r\n  }, [dark]);\r\n\r\n  // Handle scroll detection for Back to Top button\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      const scrollY = window.scrollY || window.pageYOffset || 0;\r\n      const shouldShow = scrollY > 100;\r\n      setShowBackToTop(shouldShow);\r\n    };\r\n\r\n    window.addEventListener('scroll', handleScroll, { passive: true });\r\n    \r\n    // Check initial position\r\n    handleScroll();\r\n    \r\n    return () => {\r\n      window.removeEventListener('scroll', handleScroll);\r\n    };\r\n  }, []);\r\n\r\n  // Reflect localStorage flag into React state and auto-open tutorial after first login\r\n  React.useEffect(() => {\r\n    const shouldShow = !!(token && localStorage.getItem('showGetStarted') === 'true' && localStorage.getItem('tutorialSeen') !== 'true');\r\n    setShowGetStartedFlag(shouldShow);\r\n    \r\n    // Check for immediate tutorial trigger (set during registration)\r\n    const autoShow = localStorage.getItem('autoShowTutorial') === 'true';\r\n    if (token && (shouldShow || autoShow)) {\r\n      // Small delay to ensure Habits component renders first\r\n      setTimeout(() => {\r\n        setShowTutorial(true);\r\n        localStorage.removeItem('autoShowTutorial');\r\n      }, 600);\r\n    }\r\n  }, [token]);\r\n\r\n  const handleScrollToContact = () => {\r\n    if (contactRef.current) {\r\n      contactRef.current.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  };\r\n\r\n  const handleBackToTop = () => {\r\n    // Enhanced smooth scroll implementation\r\n    const scrollToTop = () => {\r\n      const scrollStep = -window.scrollY / (500 / 15);\r\n      if (window.scrollY !== 0) {\r\n        window.requestAnimationFrame(scrollToTop);\r\n        window.scrollTo(0, window.scrollY + scrollStep);\r\n      }\r\n    };\r\n    \r\n    // Try modern smooth scroll first, fallback to custom\r\n    try {\r\n      window.scrollTo({\r\n        top: 0,\r\n        left: 0,\r\n        behavior: 'smooth'\r\n      });\r\n    } catch (e) {\r\n      scrollToTop();\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div id=\"layout\">\r\n      <header className=\"site-header\">\r\n        <div className=\"header-logo\">ðŸŒ±</div>\r\n        <div className=\"header-title\">Habit Tracker SaaS</div>\r\n        <div className=\"header-subtitle\">Track your habits, grow your life</div>\r\n        <button className=\"header-contact-btn\" onClick={handleScrollToContact}>Contact Me</button>\r\n      </header>\r\n      <Hero\r\n        contactRef={contactRef}\r\n        setPage={setPage}\r\n        token={token}\r\n        setAuthInitial={setAuthInitial}\r\n        showGetStarted={showGetStartedFlag}\r\n        openTutorial={() => setShowTutorial(true)}\r\n      />\r\n      <div className=\"main-wrapper\">\r\n        <aside className=\"sidebar\">\r\n          <div className=\"sidebar-title\">Navigation</div>\r\n          <button className={`sidebar-link${page==='home'?' active':''}`} onClick={() => setPage('home')}>Home</button>\r\n          <button className={`sidebar-link${page==='about'?' active':''}`} onClick={() => setPage('about')}>About Me</button>\r\n          <button className=\"sidebar-dark-toggle\" onClick={() => setDark(d => !d)}>\r\n            {dark ? 'Light Mode' : 'Dark Mode'}\r\n          </button>\r\n        </aside>\r\n        <main className=\"main-content\">\r\n          {page === 'about' ? <AboutMe /> : (token ? <Habits /> : <LoginRegister initial={authInitial} />)}\r\n          \r\n          {/* ContactMe at end of landing page */}\r\n          <div ref={contactRef} id=\"contact-section\">\r\n            <ContactMe />\r\n          </div>\r\n        </main>\r\n        {/* Render tutorial at root level so it truly pops up above everything */}\r\n        <Tutorial visible={showTutorial} onClose={() => setShowTutorial(false)} />\r\n      </div>\r\n      {/* Help button to re-open tutorial (always visible when logged in) */}\r\n      {token && !showTutorial && (\r\n        <button\r\n          className=\"tutorial-help-btn\"\r\n          onClick={() => setShowTutorial(true)}\r\n          title=\"Show tutorial\"\r\n          aria-label=\"Show tutorial\"\r\n        >\r\n          ?\r\n        </button>\r\n      )}\r\n      <footer className=\"site-footer\">\r\n        &copy; {new Date().getFullYear()} Habit Tracker SaaS. All rights reserved. | Created by Mamdouh\r\n      </footer>\r\n      \r\n      {/* Back to Top Button */}\r\n      {showBackToTop && (\r\n        <button\r\n          className=\"back-to-top-btn\"\r\n          onClick={handleBackToTop}\r\n          aria-label=\"Back to top\"\r\n          title=\"Back to top\"\r\n        >\r\n          <span className=\"back-to-top-icon\">â†‘</span>\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}