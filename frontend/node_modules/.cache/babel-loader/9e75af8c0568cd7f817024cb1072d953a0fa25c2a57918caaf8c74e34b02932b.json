{"ast":null,"code":"import React,{useState,useEffect,useContext,useRef}from'react';import ReactDOM from'react-dom';import{getHabits,getCompletions,getLogs}from'./api';import{AuthContext}from'./AuthContext';import{useLanguage}from'./LanguageContext';import'./ProfileDashboard.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function ProfileDashboard(_ref){let{visible,onClose,token}=_ref;const{t}=useLanguage();const[habits,setHabits]=useState([]);const[completions,setCompletions]=useState({});const[loading,setLoading]=useState(false);const[logs,setLogs]=useState([]);const[editMode,setEditMode]=useState(false);const[showFullHistory,setShowFullHistory]=useState(false);const{updateProfile,userProfile,logout}=useContext(AuthContext);// load log entries from server\nconst loadLogs=async()=>{if(!token)return;try{const res=await getLogs(token);setLogs(res.data||[]);}catch(err){console.error('Failed to load logs:',err);}};const removeHistoryAt=idx=>{// editing server logs not supported; keep client-only editing for now\nconst h=[...logs];h.splice(idx,1);setLogs(h);};// fetch habits and their completions when drawer opens or on explicit refresh\nconst fetchData=()=>{if(!token)return;setLoading(true);getHabits(token).then(res=>{setHabits(res.data||[]);return res.data||[];}).then(async hs=>{const compMap={};for(let h of hs){try{const r=await getCompletions(token,h.id);compMap[h.id]=r.data.length>0;}catch(_unused){}}setCompletions(compMap);}).finally(()=>setLoading(false));};useEffect(()=>{if(visible&&token){fetchData();loadLogs();}},[visible,token]);// refresh whenever habits are updated elsewhere\nuseEffect(()=>{const handler=()=>{if(visible){fetchData();loadLogs();}};window.addEventListener('habitUpdated',handler);return()=>window.removeEventListener('habitUpdated',handler);},[visible,token]);const badges=[{key:'7day',title:t('badge7day'),rule:hs=>hs.filter(h=>completions[h.id]).length>=7},{key:'30day',title:t('badge30day'),rule:hs=>hs.filter(h=>completions[h.id]).length>=30}];const[nameInput,setNameInput]=useState('');const[avatarInput,setAvatarInput]=useState('');const[avatarFile,setAvatarFile]=useState(null);const[avatarPreview,setAvatarPreview]=useState('');const fileInputRef=useRef(null);// helper to convert data uri -> blob URL\nconst dataUriToBlobUrl=uri=>{try{const byteString=atob(uri.split(',')[1]);const mimeString=uri.split(',')[0].split(':')[1].split(';')[0];const ab=new ArrayBuffer(byteString.length);const ia=new Uint8Array(ab);for(let i=0;i<byteString.length;i++)ia[i]=byteString.charCodeAt(i);const blob=new Blob([ab],{type:mimeString});return URL.createObjectURL(blob);}catch(_unused2){return uri;// fallback\n}};// when profile opens populate inputs\nuseEffect(()=>{if(visible&&userProfile){setNameInput(userProfile.name||'');setAvatarInput(userProfile.avatar||'');setAvatarFile(null);}},[visible,userProfile]);// keep preview synced\nuseEffect(()=>{if(avatarInput){if(avatarInput.startsWith('data:')){setAvatarPreview(dataUriToBlobUrl(avatarInput));}else{setAvatarPreview(avatarInput);}}else{setAvatarPreview('');}},[avatarInput]);// convert file to base64 string\nconst handleFileChange=e=>{const file=e.target.files[0];if(file){const reader=new FileReader();reader.onload=()=>{setAvatarInput(reader.result);};reader.readAsDataURL(file);setAvatarFile(file);}};const saveProfile=()=>{updateProfile({name:nameInput,avatar:avatarInput});};const drawerContent=/*#__PURE__*/_jsxs(_Fragment,{children:[visible&&/*#__PURE__*/_jsx(\"div\",{className:\"profile-overlay\",onClick:onClose}),/*#__PURE__*/_jsxs(\"div\",{className:\"profile-drawer\".concat(visible?' open':''),children:[/*#__PURE__*/_jsxs(\"header\",{className:\"profile-header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"profile-title\",children:t('yourProfile')}),/*#__PURE__*/_jsx(\"button\",{className:\"profile-close\",onClick:onClose,\"aria-label\":t('close'),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"profile-settings\",children:[/*#__PURE__*/_jsx(\"h3\",{children:t('account')}),/*#__PURE__*/_jsxs(\"label\",{children:[t('name'),\":\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:nameInput,onChange:e=>setNameInput(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"avatar-control\",children:[/*#__PURE__*/_jsx(\"img\",{src:avatarPreview||'https://via.placeholder.com/80?text=?',alt:t('avatarPreview'),className:\"avatar-preview-large\",onClick:()=>fileInputRef.current&&fileInputRef.current.click(),title:t('changeAvatar')}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"avatar-change-btn\",onClick:()=>fileInputRef.current&&fileInputRef.current.click(),\"aria-label\":t('changeAvatar'),children:\"\\u270E\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",ref:fileInputRef,onChange:handleFileChange,style:{display:'none'}})]}),/*#__PURE__*/_jsx(\"button\",{className:\"profile-save-btn\",onClick:saveProfile,children:t('save')})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"profile-badges\",children:[/*#__PURE__*/_jsx(\"h3\",{children:t('badges')}),/*#__PURE__*/_jsx(\"div\",{className:\"badge-grid\",children:badges.map(b=>{const unlocked=b.rule(habits);return/*#__PURE__*/_jsxs(\"div\",{className:\"badge\".concat(unlocked?' unlocked':''),children:[/*#__PURE__*/_jsx(\"span\",{className:\"badge-icon\",children:unlocked?'üèÖ':'üîí'}),/*#__PURE__*/_jsx(\"span\",{className:\"badge-title\",children:b.title})]},b.key);})})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"profile-history\",children:[/*#__PURE__*/_jsx(\"h3\",{children:t('recentHistory')}),/*#__PURE__*/_jsx(\"div\",{className:\"history-list\",children:loading?/*#__PURE__*/_jsx(\"div\",{children:t('loading')}):logs.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"history-empty\",children:t('noHistory')}):logs.slice(0,5).map((h,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"history-item\",children:[h.action,\" \",h.habitName?\"(\".concat(h.habitName,\")\"):'']},idx))}),logs.length>5&&/*#__PURE__*/_jsxs(\"button\",{className:\"view-all-history-btn\",onClick:()=>setShowFullHistory(true),children:[t('viewAll'),\" (\",logs.length,\")\"]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"profile-logout-btn\",onClick:()=>{logout();onClose();},children:t('logout')})]})]});// Full History Modal - rendered via portal to center on page\nconst historyModal=showFullHistory&&/*#__PURE__*/ReactDOM.createPortal(/*#__PURE__*/_jsx(\"div\",{className:\"history-modal-overlay\",onClick:()=>setShowFullHistory(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"history-modal\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"history-modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:t('history')}),/*#__PURE__*/_jsx(\"button\",{className:\"history-modal-close\",onClick:()=>setShowFullHistory(false),children:\"\\u2716\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"history-modal-actions\",children:/*#__PURE__*/_jsx(\"button\",{className:\"edit-history-toggle\",onClick:()=>setEditMode(m=>!m),children:editMode?t('done'):t('editHistory')})}),/*#__PURE__*/_jsx(\"div\",{className:\"history-modal-list\",children:logs.map((h,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"history-item\",children:[h.action,\" \",h.habitName?\"(\".concat(h.habitName,\")\"):'',editMode&&/*#__PURE__*/_jsx(\"button\",{className:\"history-delete-btn\",onClick:()=>removeHistoryAt(idx),children:\"\\u2716\"})]},idx))})]})}),document.body);return/*#__PURE__*/_jsxs(_Fragment,{children:[drawerContent,historyModal]});}","map":{"version":3,"names":["React","useState","useEffect","useContext","useRef","ReactDOM","getHabits","getCompletions","getLogs","AuthContext","useLanguage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProfileDashboard","_ref","visible","onClose","token","t","habits","setHabits","completions","setCompletions","loading","setLoading","logs","setLogs","editMode","setEditMode","showFullHistory","setShowFullHistory","updateProfile","userProfile","logout","loadLogs","res","data","err","console","error","removeHistoryAt","idx","h","splice","fetchData","then","hs","compMap","r","id","length","_unused","finally","handler","window","addEventListener","removeEventListener","badges","key","title","rule","filter","nameInput","setNameInput","avatarInput","setAvatarInput","avatarFile","setAvatarFile","avatarPreview","setAvatarPreview","fileInputRef","dataUriToBlobUrl","uri","byteString","atob","split","mimeString","ab","ArrayBuffer","ia","Uint8Array","i","charCodeAt","blob","Blob","type","URL","createObjectURL","_unused2","name","avatar","startsWith","handleFileChange","e","file","target","files","reader","FileReader","onload","result","readAsDataURL","saveProfile","drawerContent","children","className","onClick","concat","value","onChange","src","alt","current","click","accept","ref","style","display","map","b","unlocked","slice","action","habitName","historyModal","createPortal","stopPropagation","m","document","body"],"sources":["E:/New folder/New folder/frontend/src/ProfileDashboard.js"],"sourcesContent":["import React, { useState, useEffect, useContext, useRef } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { getHabits, getCompletions, getLogs } from './api';\r\nimport { AuthContext } from './AuthContext';\r\nimport { useLanguage } from './LanguageContext';\r\nimport './ProfileDashboard.css';\r\n\r\nexport default function ProfileDashboard({ visible, onClose, token }) {\r\n  const { t } = useLanguage();\r\n  const [habits, setHabits] = useState([]);\r\n  const [completions, setCompletions] = useState({});\r\n  const [loading, setLoading] = useState(false);\r\n  const [logs, setLogs] = useState([]);\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [showFullHistory, setShowFullHistory] = useState(false);\r\n\r\n  const { updateProfile, userProfile, logout } = useContext(AuthContext);\r\n\r\n  // load log entries from server\r\n  const loadLogs = async () => {\r\n    if (!token) return;\r\n    try {\r\n      const res = await getLogs(token);\r\n      setLogs(res.data || []);\r\n    } catch (err) {\r\n      console.error('Failed to load logs:', err);\r\n    }\r\n  };\r\n  const removeHistoryAt = idx => {\r\n    // editing server logs not supported; keep client-only editing for now\r\n    const h = [...logs];\r\n    h.splice(idx,1);\r\n    setLogs(h);\r\n  };\r\n\r\n  // fetch habits and their completions when drawer opens or on explicit refresh\r\n  const fetchData = () => {\r\n    if (!token) return;\r\n    setLoading(true);\r\n    getHabits(token)\r\n      .then(res => {\r\n        setHabits(res.data || []);\r\n        return res.data || [];\r\n      })\r\n      .then(async hs => {\r\n        const compMap = {};\r\n        for (let h of hs) {\r\n          try {\r\n            const r = await getCompletions(token, h.id);\r\n            compMap[h.id] = r.data.length > 0;\r\n          } catch {}        \r\n        }\r\n        setCompletions(compMap);\r\n      })\r\n      .finally(() => setLoading(false));\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (visible && token) {\r\n      fetchData();\r\n      loadLogs();\r\n    }\r\n  }, [visible, token]);\r\n\r\n  // refresh whenever habits are updated elsewhere\r\n  useEffect(() => {\r\n    const handler = () => {\r\n      if (visible) {\r\n        fetchData();\r\n        loadLogs();\r\n      }\r\n    };\r\n    window.addEventListener('habitUpdated', handler);\r\n    return () => window.removeEventListener('habitUpdated', handler);\r\n  }, [visible, token]);\r\n\r\n\r\n  const badges = [\r\n    { key: '7day', title: t('badge7day'), rule: hs => hs.filter(h => completions[h.id]).length >= 7 },\r\n    { key: '30day', title: t('badge30day'), rule: hs => hs.filter(h => completions[h.id]).length >= 30 }\r\n  ];\r\n\r\n  const [nameInput, setNameInput] = useState('');\r\n  const [avatarInput, setAvatarInput] = useState('');\r\n  const [avatarFile, setAvatarFile] = useState(null);\r\n  const [avatarPreview, setAvatarPreview] = useState('');\r\n  const fileInputRef = useRef(null);\r\n\r\n  // helper to convert data uri -> blob URL\r\n  const dataUriToBlobUrl = (uri) => {\r\n    try {\r\n      const byteString = atob(uri.split(',')[1]);\r\n      const mimeString = uri.split(',')[0].split(':')[1].split(';')[0];\r\n      const ab = new ArrayBuffer(byteString.length);\r\n      const ia = new Uint8Array(ab);\r\n      for (let i = 0; i < byteString.length; i++) ia[i] = byteString.charCodeAt(i);\r\n      const blob = new Blob([ab], { type: mimeString });\r\n      return URL.createObjectURL(blob);\r\n    } catch {\r\n      return uri; // fallback\r\n    }\r\n  };\r\n\r\n  // when profile opens populate inputs\r\n  useEffect(() => {\r\n    if (visible && userProfile) {\r\n      setNameInput(userProfile.name || '');\r\n      setAvatarInput(userProfile.avatar || '');\r\n      setAvatarFile(null);\r\n    }\r\n  }, [visible, userProfile]);\r\n\r\n  // keep preview synced\r\n  useEffect(() => {\r\n    if (avatarInput) {\r\n      if (avatarInput.startsWith('data:')) {\r\n        setAvatarPreview(dataUriToBlobUrl(avatarInput));\r\n      } else {\r\n        setAvatarPreview(avatarInput);\r\n      }\r\n    } else {\r\n      setAvatarPreview('');\r\n    }\r\n  }, [avatarInput]);\r\n\r\n  // convert file to base64 string\r\n  const handleFileChange = e => {\r\n    const file = e.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onload = () => {\r\n        setAvatarInput(reader.result);\r\n      };\r\n      reader.readAsDataURL(file);\r\n      setAvatarFile(file);\r\n    }\r\n  };\r\n\r\n  const saveProfile = () => {\r\n    updateProfile({ name: nameInput, avatar: avatarInput });\r\n  };\r\n\r\n  const drawerContent = (\r\n    <>\r\n      {visible && <div className=\"profile-overlay\" onClick={onClose}></div>}\r\n      <div className={`profile-drawer${visible ? ' open' : ''}`}>      \r\n        <header className=\"profile-header\">\r\n          <div className=\"profile-title\">{t('yourProfile')}</div>\r\n          <button className=\"profile-close\" onClick={onClose} aria-label={t('close')}>√ó</button>\r\n        </header>\r\n      <section className=\"profile-settings\">\r\n        <h3>{t('account')}</h3>\r\n        <label>\r\n          {t('name')}:\r\n          <input type=\"text\" value={nameInput} onChange={e=>setNameInput(e.target.value)} />\r\n        </label>\r\n          <div className=\"avatar-control\">\r\n          <img\r\n            src={avatarPreview || 'https://via.placeholder.com/80?text=?'}\r\n            alt={t('avatarPreview')}\r\n            className=\"avatar-preview-large\"\r\n            onClick={() => fileInputRef.current && fileInputRef.current.click()}\r\n            title={t('changeAvatar')}\r\n          />\r\n          <button\r\n            type=\"button\"\r\n            className=\"avatar-change-btn\"\r\n            onClick={() => fileInputRef.current && fileInputRef.current.click()}\r\n            aria-label={t('changeAvatar')}\r\n          >‚úé</button>\r\n          <input\r\n            type=\"file\"\r\n            accept=\"image/*\"\r\n            ref={fileInputRef}\r\n            onChange={handleFileChange}\r\n            style={{ display: 'none' }}\r\n          />\r\n        </div>\r\n        <button className=\"profile-save-btn\" onClick={saveProfile}>{t('save')}</button>\r\n      </section>\r\n      <section className=\"profile-badges\">\r\n        <h3>{t('badges')}</h3>\r\n        <div className=\"badge-grid\">\r\n          {badges.map(b => {\r\n            const unlocked = b.rule(habits);\r\n            return (\r\n              <div key={b.key} className={`badge${unlocked ? ' unlocked' : ''}`}>                \r\n                <span className=\"badge-icon\">{unlocked ? 'üèÖ' : 'üîí'}</span>\r\n                <span className=\"badge-title\">{b.title}</span>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n      </section>\r\n      <section className=\"profile-history\">\r\n        <h3>{t('recentHistory')}</h3>\r\n        <div className=\"history-list\">\r\n          {loading ? <div>{t('loading')}</div> : (\r\n            logs.length === 0 ? (\r\n              <div className=\"history-empty\">{t('noHistory')}</div>\r\n            ) : (\r\n              logs.slice(0, 5).map((h, idx) => (\r\n                <div key={idx} className=\"history-item\">\r\n                  {h.action} {h.habitName ? `(${h.habitName})` : ''}\r\n                </div>\r\n              ))\r\n            )\r\n          )}\r\n        </div>\r\n        {logs.length > 5 && (\r\n          <button className=\"view-all-history-btn\" onClick={() => setShowFullHistory(true)}>\r\n            {t('viewAll')} ({logs.length})\r\n          </button>\r\n        )}\r\n      </section>\r\n      \r\n      <button className=\"profile-logout-btn\" onClick={() => { logout(); onClose(); }}>\r\n        {t('logout')}\r\n      </button>\r\n    </div>\r\n    </>\r\n  );\r\n\r\n  // Full History Modal - rendered via portal to center on page\r\n  const historyModal = showFullHistory && ReactDOM.createPortal(\r\n    <div className=\"history-modal-overlay\" onClick={() => setShowFullHistory(false)}>\r\n      <div className=\"history-modal\" onClick={e => e.stopPropagation()}>\r\n        <div className=\"history-modal-header\">\r\n          <h3>{t('history')}</h3>\r\n          <button className=\"history-modal-close\" onClick={() => setShowFullHistory(false)}>‚úñ</button>\r\n        </div>\r\n        <div className=\"history-modal-actions\">\r\n          <button className=\"edit-history-toggle\" onClick={() => setEditMode(m => !m)}>\r\n            {editMode ? t('done') : t('editHistory')}\r\n          </button>\r\n        </div>\r\n        <div className=\"history-modal-list\">\r\n          {logs.map((h, idx) => (\r\n            <div key={idx} className=\"history-item\">\r\n              {h.action} {h.habitName ? `(${h.habitName})` : ''}\r\n              {editMode && (\r\n                <button className=\"history-delete-btn\" onClick={() => removeHistoryAt(idx)}>‚úñ</button>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </div>,\r\n    document.body\r\n  );\r\n\r\n  return (\r\n    <>\r\n      {drawerContent}\r\n      {historyModal}\r\n    </>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}